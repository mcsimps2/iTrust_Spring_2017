<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
	
	<ui:param name="pid" value="#{session.getAttribute('loggedInMID')}"/>
	
	<h2>Childbirth records</h2>
	
	<h:form id="childbirth_form">
		<div class="form-group">
			<h:outputLabel for="preferredChildbirthMethod">Preferred childbirth method</h:outputLabel>
			<h:selectOneMenu id="preferredChildbirthMethod" disabled="true" class="selectpicker"
			                 value="#{obstetrics_init_controller.deliveryType}">
				<f:selectItems var="method" itemLabel="#{method.toString()}" itemValue="#{method.toString()}"
							   value="#{obstetrics_init_controller.getDeliveryMethods()}" />
			</h:selectOneMenu>
		</div>
		
		<div class="form-group">
			<h:outputLabel for="pitocin">Pitocin (mg)</h:outputLabel>
			<h:inputText id="pitocin" class="form-control inline" readonly="true" />
		</div>
		
		<div class="form-group">
			<h:outputLabel for="nitrousOxide">Nitrous oxide (mg)</h:outputLabel>
			<h:inputText id="nitrousOxide" class="form-control inline" readonly="true" />
		</div>
		
		<div class="form-group">
			<h:outputLabel for="pethidine">Pethidine (mg)</h:outputLabel>
			<h:inputText id="pethidine" class="form-control inline" readonly="true" />
		</div>
		
		<div class="form-group">
			<h:outputLabel for="epiduralAnaesthesia">Epidural anaesthesia (mg)</h:outputLabel>
			<h:inputText id="epiduralAnaesthesia" class="form-control inline" readonly="true" />
		</div>
		
		<div class="form-group">
			<h:outputLabel for="magnesiumSulfate">Magnesium sulfate (mg)</h:outputLabel>
			<h:inputText id="magnesiumSulfate" class="form-control inline" readonly="true" />
		</div>
	</h:form>
	
	<h2>Obstetrics records</h2>
	
	<c:set var="obstetricsRecords" value="#{obstetrics_init_controller.getRecords(pid)}" />
	
	<table class="table table-hover">
		<thead>
			<tr>
				<th>Initialization date</th>
				<th>LMP</th>
				<th>EDD</th>
				<th>Weeks pregnant at init</th>
				<th>RH flag</th>
			</tr>
		</thead>
	
		<tbody>
			<ui:repeat var="oi_record" value="#{obstetricsRecords}">
				<tr>
					<td>#{oi_record.prettyDate}</td>
					<td>#{oi_record.prettyLMP}</td>
					<td>#{oi_record.prettyEDD}</td>
					<td>#{oi_record.numWeeksPregnant}</td>
					<td>#{oi_record.prettyRH}</td>
				</tr>
			</ui:repeat>
		</tbody>
	</table>
	
	<h2>Prior pregnancies</h2>
	
	<c:set var="priorPregnancies" value="#{obstetrics_init_controller.getPastPregnancies()}" />
	
	<table class="table table-hover">
		<thead>
			<tr>
				<th>Conception year</th>
				<th>Weeks pregnant</th>
				<th>Hours in labor</th>
				<th>Weight gain</th>
				<th>Delivery type</th>
				<th>Multiplicity</th>
			</tr>
		</thead>
	
		<tbody>
			<ui:repeat var="pregnancyInfo" value="#{priorPregnancies}">
				<tr>
					<td>#{pregnancyInfo.yearOfConception}</td>
					<td>#{pregnancyInfo.numWeeksPregnant}</td>
					<td>#{pregnancyInfo.numHoursInLabor}</td>
					<td>#{pregnancyInfo.weightGain}</td>
					<td>#{pregnancyInfo.deliveryType.toString()}</td>
					<td>#{pregnancyInfo.multiplicity}</td>
				</tr>
			</ui:repeat>
		</tbody>
	</table>
</html>